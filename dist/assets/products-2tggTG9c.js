import{r as c,A as N,u as S,b as T,j as a,L as _}from"./index-DCRbO2L6.js";import{C as $}from"./Card-92BgVD7M.js";import{P as F}from"./Pagination-BtcVu4SD.js";const B=()=>{const{language:s}=c.useContext(N),[m,x]=c.useState([]),[t,f]=c.useState({}),[n,g]=S(),[i,v]=c.useState("asc"),l=n.get("category_id"),d=parseInt(n.get("page")||"1",10);c.useEffect(()=>{P()},[s,l,d]);const P=async()=>{try{const e=await T({...l?{category_id:l}:{},page:d});e.status===200&&(x(e.data.data),f(e.data.meta))}catch(e){console.log(e)}},p=c.useMemo(()=>{const e=r=>typeof r=="string"?parseFloat(r.replace(/,/g,"")):r;return[...m].sort((r,o)=>{const u=e(r.price),h=e(o.price);return i==="asc"?u-h:h-u})},[m,i]),C=e=>{const r=e.target.value,o=new URLSearchParams(n);r?o.set("category_id",r):o.delete("category_id"),o.set("page","1"),g(o)},y=e=>{v(e.target.value)},j=e=>{const r=new URLSearchParams(n);r.set("page",e),g(r)},b=e=>{document.title=`${e} - ${s==="vi"?"Chi Tiết Sản Phẩm":"Product Details"}`};console.log(t);const w=[`${s==="vi"?"Cơ Nhảy":"Jump Cue"}`,`${s==="vi"?"Cơ Phá":"Break Cue"}`,`${s==="vi"?"Cơ Đánh":"Billard Cue"}`,`${s==="vi"?"Phụ Kiện":"Billiard Accessories"}`];return a.jsx("div",{className:"w-full grid grid-cols-6 gap-[2rem] xs:gap-[1rem] px-[3.2rem] xs:px-[1rem] py-[2rem]",children:a.jsx("main",{className:"w-full col-start-2 col-span-4 flex flex-col gap-[2rem]",children:a.jsxs("section",{className:"w-full flex flex-col gap-[1.6rem] py-[2rem] products",children:[a.jsxs("div",{className:"w-full inline-flex justify-between items-center",children:[a.jsxs("div",{className:"inline-flex gap-[1rem] items-center form-group",children:[a.jsx("label",{htmlFor:"category",className:"text-md text-dark font-medium",children:s==="vi"?"Loại:":"Category:"}),a.jsxs("select",{id:"category",name:"category_id",value:l||"",onChange:C,className:"text-sm font-semibold border border-gray-500 rounded-[0.6rem] p-[0.6rem] outline-none hover:cursor-pointer hover:border-gray-900 focus:border-gray-900",children:[a.jsx("option",{value:"",children:s==="vi"?"Tất Cả":"All"}),w.map((e,r)=>a.jsx("option",{value:r+6,children:e},r))]})]}),a.jsxs("div",{className:"inline-flex gap-[1rem] items-center form-group",children:[a.jsx("label",{htmlFor:"price",className:"text-md text-dark font-medium",children:s==="vi"?"Giá:":"Price:"}),a.jsxs("select",{id:"price",name:"price",value:i,onChange:y,className:"text-sm font-semibold border border-gray-500 rounded-[0.6rem] p-[0.6rem] outline-none hover:cursor-pointer hover:border-gray-900 focus:border-gray-900",children:[a.jsx("option",{value:"asc",children:s==="vi"?"Từ Thấp -> Cao":"Low To High"}),a.jsx("option",{value:"desc",children:s==="vi"?"Từ Cao -> Thấp":"High To Low"})]})]})]}),a.jsx("div",{className:"list-products mb-[2rem]",children:p.length>0&&p.map(e=>a.jsx(_,{to:`/products/${e.slug}`,children:a.jsx($,{url:e.main_image,alt:e.name,nameCard:e.name,price:`${s==="vi"?"Từ":"From"} ${e.price}`,onClick:()=>b(e.name)})},e.id))}),t&&t.last_page>1&&a.jsx(F,{currentPage:d,totalPages:t.last_page,onPageChange:j,pageSize:t.per_page,totalItems:t.total})]})})})};export{B as default};
