import{r,A as S,c as P,d as k,j as e,L as x,e as T,g as C}from"./index-DCRbO2L6.js";import{S as M,A as R,f as $}from"./autoplay-C5mIoS6F.js";import{p as f}from"./purify.es-CocPUCx9.js";import{C as A}from"./Card-92BgVD7M.js";const F=()=>{const{language:c}=r.useContext(S),{slug:g}=P(),{setTitle:d,setMetaTag:u}=k(),[a,j]=r.useState(null),[o,b]=r.useState([]),[_,N]=r.useState([]),[m,n]=r.useState("");r.useEffect(()=>{(async()=>{var t;try{const[i,h]=await Promise.all([T(g),C()]);i.status===200&&(j(i.data.data),d(`${i.data.data.name}`),u({ogTitle:`${i.data.data.name}`,ogImage:`${i.data.data.main_image}`}),n(((t=i.data.data.images[0])==null?void 0:t.path)||"")),h.status===200&&b(h.data.data)}catch(i){console.error("Failed to fetch data:",i),d("Error Loading Product")}})()},[g,c,d,u]),console.log(a);const l=r.useMemo(()=>(a==null?void 0:a.images)||[],[a]),p=r.useMemo(()=>{var s;return((s=a==null?void 0:a.category)==null?void 0:s.id)||""},[a]);r.useEffect(()=>{l.length>0&&n(l[0].path)},[l]),r.useEffect(()=>{if(p&&Array.isArray(o)){const s=o.filter(t=>t.category_id===p).flatMap(t=>t.products||[]);N(s)}},[p,o]);const y=r.useMemo(()=>f.sanitize((a==null?void 0:a.short_description)||""),[a]),v=r.useMemo(()=>f.sanitize((a==null?void 0:a.description)||""),[a]),w=s=>{n(s)};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"rol-start-2 grid grid-cols-6 gap-[4rem] py-[2rem] bg-gray-200",children:e.jsx("nav",{className:"col-start-2 col-span-4 px-[2rem] gap breadcrumb","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center justify-start gap-[0.6rem] breadcrumb__menu",children:[e.jsx("li",{className:"breadcrumb__menu--item",children:e.jsx(x,{to:"/",className:"!text-md breadcrumb__menu--link",children:c==="vi"?"Trang Chủ":"Home"})}),e.jsxs("li",{className:"gap-[0.6rem] breadcrumb__menu--item",children:[e.jsx("span",{className:"flex items-center justify-center text-xs font-bold text-gray-700 icon",children:e.jsx("i",{className:"ki-duotone ki-right"})}),e.jsx(x,{to:"/products",className:"!text-md breadcrumb__menu--link",children:c==="vi"?"Sản Phẩm":"Products"})]}),e.jsxs("li",{className:"gap-[0.6rem] breadcrumb__menu--item",children:[e.jsx("span",{className:"flex items-center justify-center text-xs font-bold text-gray-700 icon",children:e.jsx("i",{className:"ki-duotone ki-right"})}),e.jsx("span",{className:"!text-md breadcrumb__menu--link",children:a==null?void 0:a.name})]})]})})}),e.jsx("div",{className:"w-full grid grid-cols-6 gap-[2rem] xs:gap-[1rem] px-[3.2rem] xs:px-[1rem] py-[2rem]",children:e.jsxs("div",{className:"w-full col-start-2 col-span-4 flex flex-col gap-[2rem]",children:[e.jsxs("section",{className:"grid grid-cols-[_0.8fr_0.5fr] gap-[3rem] product",children:[e.jsxs("div",{className:"col-span-1 row-span-1 grid gap-[1rem] relative product__preview",children:[e.jsx("div",{className:"w-full aspect-square bg-gray-500 product__img",children:e.jsx("img",{src:m,alt:"Selected preview",className:"w-full aspect-square object-cover"})}),e.jsx(M,{modules:[R],spaceBetween:10,slidesPerView:4,loop:!!l.length,autoplay:{delay:2e3,disableOnInteraction:!1},className:"w-full aspect-[16/3] relative group__img",onSlideChange:s=>{if(l.length){const t=l[s.realIndex%l.length];(t==null?void 0:t.path)!==m&&n((t==null?void 0:t.path)||"")}},children:l.map((s,t)=>e.jsx($,{children:e.jsx("div",{className:`w-full aspect-square bg-gray-500 transition duration-200 border-[3px] ${m===s.path?"border-red-400":"border-transparent"} group__img--item`,onClick:()=>w(s.path),children:e.jsx("img",{src:s.path,alt:"Thumbnail",className:"w-full h-full aspect-square object-cover"})})},s.path))})]}),e.jsxs("div",{className:"col-span-2 col-start-2 flex flex-col gap-[1rem] product__information",children:[e.jsx("h2",{className:"gap-[1rem] font-bold text-display-sm break-words",children:a==null?void 0:a.name}),e.jsxs("h4",{className:"text-xl text-red-500 font-bold mb-[1rem]",children:[c==="vi"?"Từ":"From"," ",a==null?void 0:a.price]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:y},className:"!text-md !font-medium break-words"})]})]}),e.jsxs("section",{className:"w-full flex flex-col gap-[2rem] items-stretch detail__description",children:[e.jsx("div",{className:"border-b-2 border-gray-900",children:e.jsx("span",{className:"text-md font-medium uppercase bg-gray-900 float-start text-light px-[1.2rem] py-[0.8rem]",children:c==="vi"?"Mô Tả Sản Phẩm":"Description"})}),e.jsx("div",{className:"box",children:e.jsx("div",{className:"text-md text-dark leading-[3rem]",dangerouslySetInnerHTML:{__html:v}})})]}),e.jsxs("section",{className:"py-[1.6rem] flex flex-col gap-[3rem]",children:[e.jsx("h2",{className:"uppercase text-display-sm font-bold",children:c==="vi"?"Sản Phẩm Liên Quan":"Related Products"}),e.jsx("div",{className:"grid grid-cols-4 gap-[2rem] more-product",children:_.map(s=>e.jsx(x,{to:`/products/${s.slug}`,children:e.jsx(A,{url:s.main_image,alt:s.name,nameCard:s.name,price:`${c==="vi"?"Từ":"From"} ${s.price}`})},s.slug))})]})]})})]})};export{F as default};
