import{r as t,A as v,c as w,j as e,L as p,d as S,g as k}from"./index--MCR1wgl.js";import{S as P,A as C,f as R}from"./autoplay-DdpmNsgw.js";import{p as h}from"./purify.es-CocPUCx9.js";import{C as M}from"./Card-BQal_omd.js";const q=()=>{const{language:i}=t.useContext(v),{slug:x}=w(),[s,f]=t.useState(null),[d,j]=t.useState([]),[g,b]=t.useState([]),[m,n]=t.useState("");t.useEffect(()=>{(async()=>{var r;try{const[c,u]=await Promise.all([S(x),k()]);c.status===200&&(f(c.data.data),n(((r=c.data.data.images[0])==null?void 0:r.path)||"")),u.status===200&&j(u.data.data)}catch(c){console.error("Failed to fetch data:",c)}})()},[x,i]);const l=t.useMemo(()=>(s==null?void 0:s.images)||[],[s]),o=t.useMemo(()=>{var a;return((a=s==null?void 0:s.category)==null?void 0:a.id)||""},[s]);t.useEffect(()=>{l.length>0&&n(l[0].path)},[l]),t.useEffect(()=>{if(o&&Array.isArray(d)){console.log(o);const a=d.filter(r=>r.category_id===o).flatMap(r=>r.products||[]);b(a)}},[o,d]);const _=t.useMemo(()=>h.sanitize((s==null?void 0:s.short_description)||""),[s]),N=t.useMemo(()=>h.sanitize((s==null?void 0:s.description)||""),[s]),y=a=>{n(a)};return console.log(g),e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"rol-start-2 grid grid-cols-6 gap-[4rem] py-[2rem] bg-gray-200",children:e.jsx("nav",{className:"col-start-2 col-span-4 px-[2rem] gap breadcrumb","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center justify-start gap-[0.6rem] breadcrumb__menu",children:[e.jsx("li",{className:"breadcrumb__menu--item",children:e.jsx(p,{to:"/",className:"!text-md breadcrumb__menu--link",children:i==="vi"?"Trang Chủ":"Home"})}),e.jsxs("li",{className:"gap-[0.6rem] breadcrumb__menu--item",children:[e.jsx("span",{className:"flex items-center justify-center text-xs font-bold text-gray-700 icon",children:e.jsx("i",{className:"ki-duotone ki-right"})}),e.jsx(p,{to:"/products",className:"!text-md breadcrumb__menu--link",children:i==="vi"?"Sản Phẩm":"Products"})]}),e.jsxs("li",{className:"gap-[0.6rem] breadcrumb__menu--item",children:[e.jsx("span",{className:"flex items-center justify-center text-xs font-bold text-gray-700 icon",children:e.jsx("i",{className:"ki-duotone ki-right"})}),e.jsx("span",{className:"!text-md breadcrumb__menu--link",children:s==null?void 0:s.name})]})]})})}),e.jsx("div",{className:"w-full grid grid-cols-6 gap-[2rem] xs:gap-[1rem] px-[3.2rem] xs:px-[1rem] py-[2rem]",children:e.jsxs("div",{className:"w-full col-start-2 col-span-4 flex flex-col gap-[2rem]",children:[e.jsxs("section",{className:"grid grid-cols-[_0.8fr_0.5fr] gap-[3rem] product",children:[e.jsxs("div",{className:"col-span-1 row-span-1 grid gap-[1rem] relative product__preview",children:[e.jsx("div",{className:"w-full aspect-square bg-gray-500 product__img",children:e.jsx("img",{src:m,alt:"Selected preview",className:"w-full aspect-square object-cover"})}),e.jsx(P,{modules:[C],spaceBetween:10,slidesPerView:4,loop:!!l.length,autoplay:{delay:2e3,disableOnInteraction:!1},className:"w-full aspect-[16/3] relative group__img",onSlideChange:a=>{if(l.length){const r=l[a.realIndex%l.length];(r==null?void 0:r.path)!==m&&n((r==null?void 0:r.path)||"")}},children:l.map(a=>e.jsx(R,{children:e.jsx("div",{className:`w-full aspect-square bg-gray-500 transition duration-200 border-[3px] ${m===a.path?"border-red-400":"border-transparent"} group__img--item`,onClick:()=>y(a.path),children:e.jsx("img",{src:a.path,alt:"Thumbnail",className:"w-full h-full aspect-square object-cover"})})},a.id))})]}),e.jsxs("div",{className:"col-span-2 col-start-2 flex flex-col gap-[1rem] product__information",children:[e.jsx("h2",{className:"gap-[1rem] font-bold text-display-sm break-words",children:s==null?void 0:s.name}),e.jsxs("h4",{className:"text-xl text-red-500 font-bold mb-[1rem]",children:[i==="vi"?"Từ":"From"," ",s==null?void 0:s.price]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:_},className:"!text-md !font-medium break-words"})]})]}),e.jsxs("section",{className:"w-full flex flex-col gap-[2rem] items-stretch detail__description",children:[e.jsx("div",{className:"border-b-2 border-gray-900",children:e.jsx("span",{className:"text-md font-medium uppercase bg-gray-900 float-start text-light px-[1.2rem] py-[0.8rem]",children:i==="vi"?"Mô Tả Sản Phẩm":"Description"})}),e.jsx("div",{className:"box",children:e.jsx("div",{className:"text-md text-dark leading-[3rem]",dangerouslySetInnerHTML:{__html:N}})})]}),e.jsxs("section",{className:"py-[1.6rem] flex flex-col gap-[3rem]",children:[e.jsx("h2",{className:"uppercase text-display-sm font-bold",children:i==="vi"?"Sản Phẩm Liên Quan":"Related Products"}),e.jsx("div",{className:"grid grid-cols-4 gap-[2rem] more-product",children:g.map(a=>e.jsx(p,{to:`/products/${a.slug}`,children:e.jsx(M,{url:a.main_image,alt:a.name,nameCard:a.name,price:`${i==="vi"?"Từ":"From"} ${a.price}`})},a.category))})]})]})})]})};export{q as default};
