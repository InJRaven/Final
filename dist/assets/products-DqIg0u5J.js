import{r as c,A as w,u as N,b as S,j as r,L as _}from"./index--MCR1wgl.js";import{C as T}from"./Card-BQal_omd.js";import{P as F}from"./Pagination-WiJ-zkr4.js";const k=()=>{const{language:s}=c.useContext(w),[m,x]=c.useState([]),[t,f]=c.useState({}),[n,g]=N(),[i,v]=c.useState("asc"),l=n.get("category_id"),d=parseInt(n.get("page")||"1",10);c.useEffect(()=>{P()},[s,l,d]);const P=async()=>{try{const e=await S({...l?{category_id:l}:{},page:d});e.status===200&&(x(e.data.data),f(e.data.meta))}catch(e){console.log(e)}},p=c.useMemo(()=>{const e=a=>typeof a=="string"?parseFloat(a.replace(/,/g,"")):a;return[...m].sort((a,o)=>{const u=e(a.price),h=e(o.price);return i==="asc"?u-h:h-u})},[m,i]),y=e=>{const a=e.target.value,o=new URLSearchParams(n);a?o.set("category_id",a):o.delete("category_id"),o.set("page","1"),g(o)},C=e=>{v(e.target.value)},j=e=>{const a=new URLSearchParams(n);a.set("page",e),g(a)};console.log(t);const b=[`${s==="vi"?"Cơ Nhảy":"Jump Cue"}`,`${s==="vi"?"Cơ Phá":"Break Cue"}`,`${s==="vi"?"Cơ Đánh":"Billard Cue"}`,`${s==="vi"?"Phụ Kiện":"Billiard Accessories"}`];return r.jsx("div",{className:"w-full grid grid-cols-6 gap-[2rem] xs:gap-[1rem] px-[3.2rem] xs:px-[1rem] py-[2rem]",children:r.jsx("main",{className:"w-full col-start-2 col-span-4 flex flex-col gap-[2rem]",children:r.jsxs("section",{className:"w-full flex flex-col gap-[1.6rem] py-[2rem] products",children:[r.jsxs("div",{className:"w-full inline-flex justify-between items-center",children:[r.jsxs("div",{className:"inline-flex gap-[1rem] items-center form-group",children:[r.jsx("label",{htmlFor:"category",className:"text-md text-dark font-medium",children:s==="vi"?"Loại:":"Category:"}),r.jsxs("select",{id:"category",name:"category_id",value:l||"",onChange:y,className:"text-sm font-semibold border border-gray-500 rounded-[0.6rem] p-[0.6rem] outline-none hover:cursor-pointer hover:border-gray-900 focus:border-gray-900",children:[r.jsx("option",{value:"",children:s==="vi"?"Tất Cả":"All"}),b.map((e,a)=>r.jsx("option",{value:a+6,children:e},a))]})]}),r.jsxs("div",{className:"inline-flex gap-[1rem] items-center form-group",children:[r.jsx("label",{htmlFor:"price",className:"text-md text-dark font-medium",children:s==="vi"?"Giá:":"Price:"}),r.jsxs("select",{id:"price",name:"price",value:i,onChange:C,className:"text-sm font-semibold border border-gray-500 rounded-[0.6rem] p-[0.6rem] outline-none hover:cursor-pointer hover:border-gray-900 focus:border-gray-900",children:[r.jsx("option",{value:"asc",children:s==="vi"?"Từ Thấp -> Cao":"Low To High"}),r.jsx("option",{value:"desc",children:s==="vi"?"Từ Cao -> Thấp":"High To Low"})]})]})]}),r.jsx("div",{className:"list-products mb-[2rem]",children:p.length>0&&p.map(e=>r.jsx(_,{to:`/products/${e.slug}`,children:r.jsx(T,{url:e.main_image,alt:e.name,nameCard:e.name,price:`${s==="vi"?"Từ":"From"} ${e.price}`})},e.id))}),t&&t.last_page>1&&r.jsx(F,{currentPage:d,totalPages:t.last_page,onPageChange:j,pageSize:t.per_page,totalItems:t.total})]})})})};export{k as default};
